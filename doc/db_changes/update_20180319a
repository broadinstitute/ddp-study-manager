CREATE TABLE `label_setting` (
  `label_setting_id` INT(15) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `description` VARCHAR(200) NULL,
  `default_page` TINYINT(1) NOT NULL,
  `label_on_page` INT NOT NULL,
  `label_height` DOUBLE NOT NULL,
  `label_width` DOUBLE NOT NULL,
  `top_margin` DOUBLE NOT NULL,
  `right_margin` DOUBLE NOT NULL,
  `bottom_margin` DOUBLE NOT NULL,
  `left_margin` DOUBLE NOT NULL,
  `deleted` TINYINT(1) NULL DEFAULT NULL,
  PRIMARY KEY (`label_setting_id`),
  UNIQUE INDEX `label_setting_id_UNIQUE` (`label_setting_id` ASC),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC));

--   Additional Requests
ALTER TABLE `ddp_medical_record`
ADD COLUMN `fax_sent_by` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent`,
ADD COLUMN `fax_sent_2` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_confirmed`,
ADD COLUMN `fax_sent_2_by` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_2`,
ADD COLUMN `fax_confirmed_2` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_2_by`,
ADD COLUMN `fax_sent_3` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_confirmed_2`,
ADD COLUMN `fax_sent_3_by` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_3`,
ADD COLUMN `fax_confirmed_3` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_3_by`;

ALTER TABLE `ddp_onc_history_detail`
ADD COLUMN `fax_sent_by` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent`,
ADD COLUMN `fax_sent_2` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_confirmed`,
ADD COLUMN `fax_sent_2_by` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_2`,
ADD COLUMN `fax_confirmed_2` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_2_by`,
ADD COLUMN `fax_sent_3` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_confirmed_2`,
ADD COLUMN `fax_sent_3_by` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_3`,
ADD COLUMN `fax_confirmed_3` VARCHAR(45) NULL DEFAULT NULL AFTER `fax_sent_3_by`;

-- add new role for skipping participant events
INSERT INTO `access_role` (`name`) VALUES ('participant_event');

CREATE TABLE `ddp_participant_event` (
  `ddp_participant_event_id` int(15) NOT NULL AUTO_INCREMENT,
  `ddp_instance_id` int(15) NOT NULL,
  `ddp_participant_id` varchar(200) NOT NULL,
  `event` varchar(200) NOT NULL,
  `date` bigint(20) NOT NULL,
  `done_by` int(11) NOT NULL,
  PRIMARY KEY (`ddp_participant_event_id`),
  KEY `participant_event_user_fk_idx` (`done_by`),
  KEY `participant_event_instance_fk_idx` (`ddp_instance_id`),
  CONSTRAINT `participant_event_instance_fk` FOREIGN KEY (`ddp_instance_id`) REFERENCES `ddp_instance` (`ddp_instance_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `participant_event_user_fk` FOREIGN KEY (`done_by`) REFERENCES `access_user` (`user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `event_type` (
  `event_type_id` INT NOT NULL AUTO_INCREMENT,
  `ddp_instance_id` INT(15) NOT NULL,
  `event_name` VARCHAR(45) NOT NULL,
  `event_description` VARCHAR(200) NULL,
  PRIMARY KEY (`event_type_id`),
  INDEX `event_instance_idx` (`ddp_instance_id` ASC),
  CONSTRAINT `event_instance`
    FOREIGN KEY (`ddp_instance_id`)
    REFERENCES `ddp_instance` (`ddp_instance_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) ENGINE=InnoDB DEFAULT CHARSET=utf8;
